# aspect-prmf 

## About
aspect_prmf contains a suite of Python functions to open, read, write, and modify [ASPECT](https://aspect.geodynamics.org/) input parameter files. For example, it can be used to handle ASPECT input parameter files from within Jupyter Notebook. These routines were created mainly to help in the development of geodynamic modelling educational material, but can be used and modified for other purposes.

## Dependencies
- xmltodict
- requests

## Functions
aspect_prmf.py contains the following functions:

- ***combine_dicts***: Recursive function that takes two dictionaries (a) and (b), and combines them in (b). Keys and values that are in (a) but not found in (b), are added to (b). This is an in-place function, use with caution as input b is overwritten.
- ***rekey***: Recursive function to update parameter names imported from parameters.xml. The function update the dictionary keys/parameter names by replacing '_20' with ' ' and '_2d' with '-'.
- ***import_prm_library***: Function to import the default parameter library, as a dictionary, from the parameters.xml at: https://aspect.geodynamics.org/doc/parameter_view/parameters.xml.
- ***prmf_to_prmlist***: Function to open an ASPECT parameter file, clean it (remove comment and blank lines), and returns a list of the parameter lines.
- ***prmlist_to_prmdict***: Function to convert a list of parameter lines (e.g., generated by <prmf_to_list>) to a nested dictionary of parameters.
- ***check_prmdict_diff***: Recursive function that compares dictionary dict_1 against dictionary dict_2, and prints on the screen the keys that exists only in dict_1 and the values that are different in the two dictionaries.
- ***load_prmf***: Function to load a parameter file and return a nested dictionary of all parameters and their values.
- ***check_prmf_diff***: Function to check and print on the screen the differences between two prm files.
- ***sprint_prmdict***: Recursive function to print ASPECT parameters from a parameter dictionary on the screen.
- ***format_prmdict***: Recursive Function that takes a parameter dictionary and returns a list of lines with the proper formatting/indentation.
- ***rite_prmdict***: Recursive Function that takes a parameter dictionary and write it into a formatted parameter text file.
- ***prmname_check***:  Function to check if all parameter names in a parameter dictionary are recognized. Unrecognized parameters are printed on the screen.

## Examples
aspect_prmf.ipynb is a Jupyter notebook with simple examples illustrating how to use the different functions.
